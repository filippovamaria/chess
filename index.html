<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>

    const alphabet = {
        "a": 1,
        "b": 2,
        "c": 3,
        "d": 4,
        "e": 5,
        "f": 6,
        "g": 7,
        "h": 8
    }
    const fieldsLetters = Object.keys(alphabet)

    function isTurnPossible(figure, startPlaceOnBoard, targetPlaceOnBoard) {

        const figureNameToCheckMovePossibilityFunctionMap = {
            "pawn": isPossibleMoveForPawn,
            "king": isPossibleMoveForKing,
            "queen": isPossibleMoveForQueen,
            "rook": isPossibleMoveForRook,
            "elephant": isPossibleMoveForElephant,
            "horse": isPossibleMoveForHorse
        }
        const [startLetterCoord, startNumberCoord] = startPlaceOnBoard.toLowerCase();
        const [targetLetterCoord, targetNumberCoord] = targetPlaceOnBoard.toLowerCase();
        const isMovePossible = figureNameToCheckMovePossibilityFunctionMap[figure]

        validatePlaceCoord([startLetterCoord, startNumberCoord])
        validatePlaceCoord([targetLetterCoord, targetNumberCoord])

        if ((startLetterCoord === targetLetterCoord) &&
            (startNumberCoord === targetLetterCoord)) {
            throw new Error("нельзя не совершать ход")
        }

        const possibleMoveCalculations = {
            startLetterCoord,
            startNumberCoord: Number(startNumberCoord),
            targetLetterCoord,
            targetNumberCoord: Number(targetNumberCoord),
            moduleOfGorizontalField: Math.abs(alphabet[startLetterCoord] - alphabet[targetLetterCoord]),
            moduleOfVerticalField: Math.abs(alphabet[startLetterCoord] - alphabet[targetLetterCoord])
        }

        return isMovePossible(possibleMoveCalculations)
    }

    function isPossibleMoveForPawn({ startLetterCoord, 
                                     startNumberCoord, 
                                     targetLetterCoord,
                                     targetNumberCoord,
                                     moduleOfGorizontalField,
                                     moduleOfVerticalField }) {

        const possibleMoveForwardByNumberCoord = startNumberCoord + 1

        if (startNumberCoord === 8) {
            return false
        }

        return possibleMoveForwardByNumberCoord === targetNumberCoord && startLetterCoord === targetLetterCoord
    }

    function isPossibleMoveForKing({ startLetterCoord, 
                                     startNumberCoord, 
                                     targetLetterCoord,
                                     targetNumberCoord,
                                     moduleOfGorizontalField,
                                     moduleOfVerticalField }) {

        const possibleDiff = [0, 1];
        return possibleDiff.includes(moduleOfGorizontalField) && possibleDiff.includes(moduleOfVerticalField)
    }

    function isPossibleMoveForQueen({ startLetterCoord, 
                                      startNumberCoord, 
                                      targetLetterCoord,
                                      targetNumberCoord,
                                      moduleOfGorizontalField,
                                      moduleOfVerticalField }) {

        return isPossibleMoveForRook({ startLetterCoord, startNumberCoord, targetLetterCoord, targetNumberCoord, moduleOfGorizontalField, moduleOfVerticalField }) ||
               isPossibleMoveForElephant({ startLetterCoord, startNumberCoord, targetLetterCoord, targetNumberCoord, moduleOfGorizontalField, moduleOfVerticalField })
    }

    function isPossibleMoveForRook({ startLetterCoord, 
                                     startNumberCoord, 
                                     targetLetterCoord,
                                     targetNumberCoord,
                                     moduleOfGorizontalField,
                                     moduleOfVerticalField }) {

        return startLetterCoord === targetLetterCoord || startNumberCoord === targetNumberCoord
    }

    function isPossibleMoveForElephant({ startLetterCoord, 
                                         startNumberCoord, 
                                         targetLetterCoord,
                                         targetNumberCoord,
                                         moduleOfGorizontalField,
                                         moduleOfVerticalField }) {

        return moduleOfGorizontalField === moduleOfVerticalField
    }

    function isPossibleMoveForHorse({ startLetterCoord, 
                                      startNumberCoord, 
                                      targetLetterCoord,
                                      targetNumberCoord,
                                      moduleOfGorizontalField,
                                      moduleOfVerticalField }) {

        return (moduleOfVerticalField === 1 && moduleOfGorizontalField === 2) ||
               (moduleOfVerticalField === 2 && moduleOfGorizontalField === 1)
    }

    function validatePlaceCoord([letterCoord, numberCoord]) {
        const regexLetter = new RegExp('[a-h]');
        const regexNumber = new RegExp('[1-8]');

        if (!regexLetter.test(letterCoord) || !regexNumber.test(numberCoord)) {
            throw new Error("нет такого поля на доске")
        }
    }

    console.log(isTurnPossible("pawn", "a7", "A8"))

</script>

</html>